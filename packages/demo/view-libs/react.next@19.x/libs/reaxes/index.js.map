{"version":3,"file":"index.js","mappings":"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","sources":["webpack://mono-reaxes/external module \"lodash\"","webpack://mono-reaxes/webpack/bootstrap","webpack://mono-reaxes/webpack/runtime/define property getters","webpack://mono-reaxes/webpack/runtime/hasOwnProperty shorthand","webpack://mono-reaxes/external module \"mobx\"","webpack://mono-reaxes/./packages/reaxes/src/reaxable.tsx","webpack://mono-reaxes/./packages/reaxes/src/reaxel.tsx","webpack://mono-reaxes/external module \"reaxes-utils\"","webpack://mono-reaxes/./packages/reaxes/src/Reaxes.tsx"],"sourcesContent":["var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_lodash__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"action\"]: () => __WEBPACK_EXTERNAL_MODULE_mobx__.action, [\"observable\"]: () => __WEBPACK_EXTERNAL_MODULE_mobx__.observable, [\"reaction\"]: () => __WEBPACK_EXTERNAL_MODULE_mobx__.reaction });","export const createReaxable  = <S extends object>(state : S) => {\r\n\tconst store = observable<S>(state);\r\n\t/**\r\n\t * 可变地修改store内数据, 不使用不可变从外部替换.\r\n\t * @param partialState 深度递归部分合并state ,\r\n\t */\r\n\tconst mutatePartialState = <T extends object = S>(partialState : Partial<T> , deepStore : any = store) => {\r\n\t\tfor( const key in partialState ) {\r\n\t\t\tconst value = partialState[key];\r\n\t\t\tif( _.isPlainObject(value) ) {\r\n\t\t\t\tif( _.isPlainObject(deepStore[key]) ) {\r\n\t\t\t\t\tmutatePartialState(value as any , deepStore[key]);\r\n\t\t\t\t}\r\n\t\t\t} else if( isBasicType(value) ) {\r\n\t\t\t\taction(() => {\r\n\t\t\t\t\tdeepStore[key] = value;\r\n\t\t\t\t})();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t};\r\n\t\r\n\tconst setMobxState = action(<S extends {}>(store , partialState : Partial<S>):S => {\r\n\t\treturn Object.assign(store , partialState);\r\n\t});\r\n\tconst mergeMobxState = action(<S extends {}>(store , partialState : Partial<S>):S => {\r\n\t\treturn _.merge(store , partialState);\r\n\t});\r\n\t\r\n\t/**\r\n\t * 以赋值形式直接修改store内数据,免去层层partial的麻烦\r\n\t */\r\n\tconst mutate = <T extends (store:S) => void>(callback:T) => {\r\n\t\taction(() => callback(store))();\r\n\t};\r\n\t\r\n\treturn {\r\n\t\tstore ,\r\n\t\tmutate,\r\n\t\tsetState : (partialState : Partial<S>) => setMobxState(store , partialState) ,\r\n\t\tmergeState : (partialState : Partial<S>) => mergeMobxState(store , partialState) ,\r\n\t\t_UNSTABLE_mutatePartialState :mutatePartialState,\r\n\t};\r\n};\r\n\r\n/**\r\n * 创建store时为某个属性设置监听深度\r\n * \r\n * @todo Not implemented yet.\r\n */\r\nexport const depth = <T = any>(target:T,depth:number):T => {\r\n\treturn null\r\n}\r\n\r\ntype isBasicType<V> = V extends basicType ? true : false;\r\n\r\ntype basicType = ( number | boolean | string | symbol | bigint | null | undefined );\r\n\r\n\r\n\r\nconst isBasicType = <V extends any>(value : V) : isBasicType<V> => {\r\n\t\r\n\tif( [ \"boolean\" , \"string\" , \"undefined\" , \"number\" , \"symbol\" , \"bigint\" ].\r\n\tincludes(typeof value) ) {\r\n\t\treturn true as any;\r\n\t} else if( value === null ) {\r\n\t\treturn true as any;\r\n\t} else {\r\n\t\treturn false as any;\r\n\t}\r\n};\r\ntype RecursivePartial<S extends object> = {\r\n\t[p in keyof S]+? : S[p] extends object ? RecursivePartial<S[p]> : S[p];\r\n};\r\n\r\nimport {\r\n\tobservable ,\r\n\taction ,\r\n} from 'mobx';\r\n","/*构造一个reaxel出来,目前只是将回调函数立即执行了, 后续可能会将callback传入其他参数*/\r\nexport const reaxel = <T extends (...args:any[]) => any>(callback:T):ReturnType<T> => {\r\n\treturn callback();\r\n};\r\n","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"shallowEqual\"]: () => __WEBPACK_EXTERNAL_MODULE_reaxes_utils_40cf4af7__.shallowEqual });","export const Reaxes = new (class {\r\n\t\r\n\tobsReaction<F extends (first? : boolean , disposer? : IReactionDisposer) => any>(callback : F , dependencies:() => Array<any>) : ReturnType<F>{\r\n\t\tlet depList = dependencies();\r\n\t\tconst disposer = reaction(dependencies , (data , reaction) => {\r\n\t\t\tconst dataChanged = !utils.shallowEqual(data , depList);\r\n\t\t\tif( dataChanged ) {\r\n\t\t\t\tcallback(false , disposer);\r\n\t\t\t\tdepList = data;\r\n\t\t\t} else {\r\n\t\t\t\t// crayon.red( 'reaction called but data not changed' );\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn callback(true , disposer);\r\n\t};\r\n\t\r\n\t/**\r\n\t * 注册时传入回调函数 和依赖组, 之后每一次调用都会比对依赖组,如果改变则会执行回调函数\r\n\t */\r\n\tcontrastedCallback<T extends (...args:any[]) => any>(callback:T , deps = () => []){\r\n\t\tlet depList = deps();\r\n\t\tlet currentReturn ;\r\n\t\treturn [\r\n\t\t\t(depsSetter) => {\r\n\t\t\t\tconst tempDepsList = depsSetter(depList);\r\n\t\t\t\treturn (...args) => {\r\n\t\t\t\t\t/*debug时打开*/\r\n\t\t\t\t\t// console.log(!utils.default.shallowEqual(depList,tempDepsList),depList,tempDepsList);\r\n\t\t\t\t\tif( !utils.shallowEqual(depList , tempDepsList) ) {\r\n\t\t\t\t\t\tlet ret = currentReturn = callback(...args);\r\n\t\t\t\t\t\tdepList = tempDepsList;\r\n\t\t\t\t\t\treturn { next:(cb) => cb(currentReturn) };\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t} , () => {\r\n\t\t\t\tdepList = deps();\r\n\t\t\t},\r\n\t\t];\r\n\t\t\r\n\t\t// function next(_callback: (ret:ReturnType<T>) => void){\r\n\t\t// \treturn () => _callback(currentReturn);\r\n\t\t// }\r\n\t}\r\n\t\r\n\t/**\r\n\t * 替代老版本的contrastedCallback\r\n\t */\r\n\t_UNSTABLE_EXPIMENTAL_consistentCallback = <T extends (...args:any[]) => any>(callback:T , deps = () => []) => {\r\n\t\tlet depList = deps();\r\n\t\t/*上一次callback的返回值*/\r\n\t\tlet prevRet ;\r\n\t\treturn [\r\n\t\t\t(depsSetter) => {\r\n\t\t\t\tconst tempDepsList = depsSetter(depList);\r\n\t\t\t\treturn (...args:Parameters<T>):ReturnType<T> => {\r\n\t\t\t\t\t/*debug时打开*/\r\n\t\t\t\t\t// console.log(!utils.default.shallowEqual(depList,tempDepsList),depList,tempDepsList);\r\n\t\t\t\t\tif( !utils.shallowEqual(depList , tempDepsList) ) {\r\n\t\t\t\t\t\tdepList = tempDepsList;\r\n\t\t\t\t\t\treturn prevRet = callback(...args);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\treturn prevRet;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t} , \r\n\t\t\t() => {\r\n\t\t\t\tdepList = deps();\r\n\t\t\t},\r\n\t\t];\r\n\t};\r\n\t\r\n\t/*手动收集依赖,使组件响应store的值变化. keys是要指定响应的属性\r\n\t *如果不传propKeys则整个store的变化都会引起重新渲染*/\r\n\tcollectDeps = (store , propKeys : ( string | number | symbol )[] = []) => {\r\n\t\tif( ! _.isObject(store) ) throw 'the store argument must be a mobx observed object';\r\n\t\tif( propKeys.length ) {\r\n\t\t\tpropKeys.forEach((key) => {\r\n\t\t\t\tstore[key];\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tObject.getOwnPropertyNames(store).forEach((key) => {\r\n\t\t\t\tstore[key];\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n});\r\n\r\n// export type Reaxes = new () => {\r\n// \tcollectDeps(store : object , propKeys? : ( string | number | symbol )[]) : void;\r\n// \t/*自动收集dependencies里的依赖, 当依赖变化时自动执行callback*/\r\n// \tobsReaction(callback : (first : boolean , disposer? : IReactionDisposer) => any , dependencies:() => Array<any>) : void;\r\n// \t/*将其返回值存储下来 , 每次调用其时传入依赖数组,当与上次浅比较不匹配时才会执行,否则忽略*/\r\n// \tcontrastedCallback<C extends (...args:E[]) => any,F extends () => any[] , E = any>\r\n// \t(callback : C , deps : F) : [(depsSetter : (prevDeps : any[]) => any[]) => C , () => void];\r\n// };\r\n\r\nimport {\r\n\treaction ,\r\n\tIReactionDisposer ,\r\n} from 'mobx';\r\nimport * as utils from 'reaxes-utils';\r\n"],"names":["module","exports","__WEBPACK_EXTERNAL_MODULE_lodash__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","y","x","__WEBPACK_EXTERNAL_MODULE_mobx__","action","observable","reaction","createReaxable","state","store","setMobxState","partialState","assign","mergeMobxState","_","merge","mutate","callback","setState","mergeState","_UNSTABLE_mutatePartialState","mutatePartialState","deepStore","arguments","length","_loop","value","isPlainObject","isBasicType","depth","target","includes","_typeof","reaxel","__WEBPACK_EXTERNAL_MODULE_reaxes_utils_40cf4af7__","shallowEqual","Reaxes","_class2","_classCallCheck","_defineProperty","prevRet","deps","depList","depsSetter","tempDepsList","utils","apply","propKeys","isObject","forEach","getOwnPropertyNames","dependencies","disposer","data","currentReturn","next","cb"],"sourceRoot":""}